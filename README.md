# Task4_MicroServices_T1_RyabininSergey

## Выполненное задание 4 (Логирование и AOP)

Сегодня была реализована система логирования для всех микросервисов проекта согласно заданию №4. Основные изменения:

1. **Разработан annotation-based аспект `@LogDatasourceError`:**
   - При возникновении исключений в сервисах:
     - Отправка сообщения в Kafka топик `service_logs` с ключом – названием микросервиса.
     - Заголовки: `type` = ERROR, WARNING или INFO.
     - Сообщение в JSON-формате: timestamp, сигнатура метода, стектрейс исключения, текст исключения, входные параметры метода.
   - Если Kafka недоступен, запись сообщения в таблицу БД `error_log`.
   - Ошибки выводятся в консоль для наглядности.

2. **Разработан аспект `@HttpOutcomeRequestLog` (AfterReturning) для методов, отправляющих HTTP-запросы:**
   - Логирование успешного ответа сервиса.
   - Ключ топика – название микросервиса.
   - Заголовок: `type = INFO`.
   - Сообщение включает: timestamp, сигнатуру метода, URI запроса, параметры, тело запроса/ответа.

3. **Разработан аспект `@HttpIncomeRequestLog` (Before) для входящих HTTP-запросов:**
   - Логирование всех входящих REST-запросов.
   - Ключ топика – название микросервиса.
   - Заголовок: `type = INFO`.
   - Сообщение включает: timestamp, сигнатуру метода, URI запроса, параметры, тело запроса.

4. **Логирование сервисов и контроллеров:**
   - Все REST-контроллеры и сервисы во всех микросервисах (`AccountProcessing`, `ClientProcessing`, `CreditProcessing`) покрыты логированием.

## Итог

- Полностью реализовано AOP-логирование исключений, входящих и исходящих HTTP-запросов.
- Логируются ключевые события бизнес-логики.
- Все ошибки выводятся в консоль, отправляются в Kafka и при необходимости записываются в БД.
